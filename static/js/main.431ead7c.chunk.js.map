{"version":3,"sources":["logo.svg","step.js","svgDraw.js","svgDrawContext.js","svgContainer.js","connection.js","loader.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Step","react_default","a","createElement","className","this","props","name","description","requirements","map","element","key","toString","nameOfReq","React","Component","GUTTER_WIDTH","COLUMN_WIDTH","signum","x","absolute","connectElements","svgContainer","svg","path","startElem","endElem","offset","left","temp","svgTop","top","svgLeft","startCoord","endCoord","tweak","outerHeight","startX","startY","endX","endY","stroke","parseFloat","attr","deltaX","deltaY","delta","arc1","arc2","riseX","Math","floor","drawPath","outerWidth","SVGDraw","connections","node1","node2","push","reset","_this","forEach","connection","$","newSVG","newSVGContainer","window","resize","bind","connectAll","SVGDrawContext","createContext","SVGContainer","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","svgDraw","setUp","ReactDOM","findDOMNode","find","width","height","svgDrawContext","Provider","value","children","Connection","context","connect","startRef","current","endRef","random","d","fill","strokeWidth","contextType","ReqTypes","ReqTypeNames","_ReqTypeNames","defineProperty","req","UsesUpType","type","amount","UsesUp","STARTING_MATERIALS","Set","STEPS","outputs","Loader","materials","has","steps","sources","nextMaterials","nextSteps","remainingSteps","nextSources","objectSpread","step","satisfiesRequirement","reduce","acc","curr","concat","toConsumableArray","o","columns","counter","next","getNextColumn","connectionRefs","ref","allComponentsDidMount","scroll","e","css","scrollLeft","_this2","columnsWithSources","getColumnsWithSources","stepRefs","column","createRef","getRawReq","Fragment","src_connection","index","src_step","assign","App","src","loader","Boolean","location","hostname","match","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.431ead7c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\r\nimport {nameOfReq} from './loader';\r\n\r\n/* \r\n    {\r\n        name: \"File name change petition\",\r\n        description: \"Go to court and file a petition for name change!\",\r\n        requirements: [UsesUp(ReqTypes.MONEY, 50)],\r\n        outputs: [ReqTypes.INITIAL_COURT_ORDER],\r\n    },\r\n    */\r\n\r\nclass Step extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"smallStep\">\r\n                <h3>{this.props.name}</h3>\r\n                <span>{this.props.description}</span>\r\n                <ul>\r\n                    {this.props.requirements.map(\r\n                        element =>\r\n                            <li key={element.toString()}>{nameOfReq(element)}</li>\r\n                    )}\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Step;","/*\r\n * FROM HERE::\r\n * https://gist.github.com/alojzije/11127839\r\n */\r\n\r\n import $ from 'jquery'\r\n\r\nconst GUTTER_WIDTH = 80;\r\nconst COLUMN_WIDTH = 300;\r\n\r\n//helper functions, it turned out chrome doesn't support Math.sgn() \r\nfunction signum(x) {\r\n    return (x < 0) ? -1 : 1;\r\n}\r\nfunction absolute(x) {\r\n    return (x < 0) ? -x : x;\r\n}\r\n\r\nfunction drawPath(svg, path, startX, startY, endX, endY) {\r\n    // get the path's stroke width (if one wanted to be  really precize, one could use half the stroke size)\r\n    var stroke =  parseFloat(path.attr(\"stroke-width\"));\r\n    // check if the svg is big enough to draw the path, if not, set heigh/width\r\n    if (svg.attr(\"height\") <  startY + stroke)        svg.attr(\"height\", startY + stroke);\r\n    if (svg.attr(\"height\") <  endY + stroke)          svg.attr(\"height\", endY + stroke);\r\n    if (svg.attr(\"width\" ) < (endX) )                 svg.attr(\"width\", (endX));\r\n    \r\n    var deltaX = (endX - startX) * 0.15;\r\n    var deltaY = (endY - startY) * 0.15;\r\n    // for further calculations which ever is the shortest distance\r\n    var delta  =  deltaX < absolute(deltaY) ? deltaX : absolute(deltaY);\r\n\r\n    // set sweep-flag (counter/clock-wise)\r\n    // if start element is closer to the left edge,\r\n    // draw the first arc counter-clockwise, and the second one clock-wise\r\n    var arc1 = 0; var arc2 = 1;\r\n    if (startY < endY) {\r\n        arc1 = 1;\r\n        arc2 = 0;\r\n    }\r\n\r\n    // Shift right by half a gutter so that each colum\r\n    // includes the gutter to the left of it\r\n    const lastGutter = Math.floor((endX + GUTTER_WIDTH / 2) / (COLUMN_WIDTH + GUTTER_WIDTH));\r\n    const riseX = lastGutter * (COLUMN_WIDTH + GUTTER_WIDTH) - GUTTER_WIDTH / 2;\r\n\r\n    // draw tha pipe-like path\r\n    // 1. move a bit down, 2. arch,  3. move a bit to the right, 4.arch, 5. move down to the end \r\n    path.attr(\"d\",  \"M\"  + startX + \" \" + startY +\r\n    \" H\" + (riseX) +\r\n    \" A\" + delta + \" \" +  delta + \" 0 0 \" + arc1 + \" \" + (riseX + delta) + \" \" + (startY+ delta*signum(deltaY)) +\r\n    \" V\" + (endY - delta*signum(deltaY)) + \r\n    \" A\" + delta + \" \" +  delta + \" 0 0 \" + arc2 + \" \" + (riseX + 2*delta) + \" \" + (endY) +\r\n    \" H\" + endX );\r\n}\r\n\r\nfunction connectElements(svgContainer, svg, path, startElem, endElem) {\r\n    // if first element is further rigth than the second, swap!\r\n    if(startElem.offset().left > endElem.offset().left){\r\n        var temp = startElem;\r\n        startElem = endElem;\r\n        endElem = temp;\r\n    }\r\n\r\n    // get (top, left) corner coordinates of the svg container   \r\n    var svgTop  = svgContainer.offset().top;\r\n    var svgLeft = svgContainer.offset().left;\r\n\r\n    // get (top, left) coordinates for the two elements\r\n    var startCoord = startElem.offset();\r\n    var endCoord   = endElem.offset();\r\n\r\n    const tweakWeight = 0.2;\r\n    const tweak = (endCoord.top - startCoord.top) / svgContainer.outerHeight();\r\n\r\n    // calculate path's start (x,y)  coords\r\n    // we want the x coordinate to visually result in the element's mid point\r\n    var startX = startCoord.left + startElem.outerWidth() - svgLeft;    // x = left offset + width - svg's left offset\r\n    var startY = startCoord.top  + (0.5 + tweakWeight * tweak)*startElem.outerHeight() - svgTop;        // y = top offset + 0.5*height - svg's top offset\r\n\r\n        // calculate path's end (x,y) coords\r\n    var endX = endCoord.left - svgLeft;\r\n    var endY = endCoord.top + (0.5 - tweakWeight * tweak)*endElem.outerHeight()  - svgTop;\r\n\r\n    // call function for drawing the path\r\n    drawPath(svg, path, startX, startY, endX, endY);\r\n\r\n}\r\n\r\n\r\nclass SVGDraw {\r\n    connections = [];\r\n    svg;\r\n\r\n    connect(path, node1, node2) {\r\n        this.connections.push({path, node1, node2});\r\n\r\n        if (this.svg && this.svgContainer) {\r\n            this.reset();\r\n        }\r\n    }\r\n\r\n    connectAll() {\r\n        this.connections.forEach(\r\n            connection => \r\n                connectElements(\r\n                    $(this.svgContainer),\r\n                    $(this.svg),\r\n                    $(connection.path),\r\n                    $(connection.node1),\r\n                    $(connection.node2)\r\n                )\r\n        );\r\n    }\r\n\r\n    setUp(newSVG, newSVGContainer) {\r\n        this.svg = newSVG;\r\n        this.svgContainer = newSVGContainer;\r\n\r\n        this.reset();\r\n        $(window).resize(this.reset.bind(this));\r\n    }\r\n\r\n    reset() {\r\n        // reset svg each time \r\n        $(this.svg).attr(\"height\", \"0\");\r\n        $(this.svg).attr(\"width\", \"0\");\r\n        this.connectAll();\r\n    }\r\n}\r\n\r\nexport default SVGDraw;","import React from 'react';\r\nconst SVGDrawContext = React.createContext(null);\r\nexport default SVGDrawContext;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SVGDraw from './svgDraw';\r\nimport $ from 'jquery';\r\nimport SVGDrawContext from './svgDrawContext';\r\n\r\nclass SVGContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.svgDraw = new SVGDraw();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.svgDraw.setUp(\r\n            $(ReactDOM.findDOMNode(this)).find('svg'),\r\n            ReactDOM.findDOMNode(this)\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"svgContainer\">\r\n                <svg width=\"0\" height=\"0\">\r\n                <SVGDrawContext.Provider value={this.svgDraw}>\r\n                    {this.props.children}\r\n                </SVGDrawContext.Provider>\r\n                </svg>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SVGContainer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SVGDrawContext from './svgDrawContext';\r\n\r\nclass Connection extends React.Component {\r\n    // We need to get a ref to this and then call this in the parent\r\n    // apparently, because the refs are in a different subtree\r\n    // so React doesn't realize they need to be rendered before calling\r\n    // componentDidMount on this object\r\n    allComponentsDidMount() {\r\n        this.context.connect(\r\n            ReactDOM.findDOMNode(this),\r\n            ReactDOM.findDOMNode(this.props.startRef.current),\r\n            ReactDOM.findDOMNode(this.props.endRef.current));\r\n    }\r\n\r\n    render() {\r\n        const stroke = 'rgba(' +\r\n            (Math.random() * 255) + ',' +\r\n            (Math.random() * 255) + ',' +\r\n            (Math.random() * 255) + ')';\r\n        return (\r\n            <path d=\"M0 0\" stroke={stroke} fill=\"none\" strokeWidth=\"12px\"/>\r\n        );\r\n    }\r\n}\r\nConnection.contextType = SVGDrawContext;\r\n\r\nexport default Connection;","import React from 'react';\r\nimport Step from './step';\r\nimport './App.css';\r\nimport SVGContainer from './svgContainer';\r\nimport Connection from './connection';\r\nimport $ from 'jquery';\r\n\r\nconst ReqTypes = {\r\n    \"MONEY\": 0,\r\n    \"THERAPIST\": 1,\r\n    \"PHYSICIAN\": 2,\r\n    \"THERAPIST_LETTER\": 3,\r\n    \"PHYSICIAN_LETTER\": 4,\r\n    \"COURT_ORDER\": 5,\r\n    \"SOCIAL_SECURITY_CARD\": 6,\r\n    \"MVA_LETTER\": 7,\r\n    \"DIGIAL_SOCIAL_SECURITY_UPDATE\": 8,\r\n    \"INITIAL_COURT_ORDER\": 9,\r\n    \"DRIVERS_LICENSE\": 10,\r\n    \"PASSPORT\": 11\r\n}\r\n\r\nconst ReqTypeNames = {\r\n    [ReqTypes.MONEY]: 'Dollars',\r\n    [ReqTypes.THERAPIST]: 'Therapist',\r\n    [ReqTypes.PHYSICIAN]: 'Physician',\r\n    [ReqTypes.THERAPIST_LETTER]: 'Letter from therapist',\r\n    [ReqTypes.PHYSICIAN_LETTER]: 'Letter from physician',\r\n    [ReqTypes.COURT_ORDER]: 'Court order of name change',\r\n    [ReqTypes.SOCIAL_SECURITY_CARD]: 'Updated social security card',\r\n    [ReqTypes.MVA_LETTER]: 'MVA letter certifying gender change',\r\n    [ReqTypes.DIGIAL_SOCIAL_SECURITY_UPDATE]: 'Updated name in Social Security computer systems',\r\n    [ReqTypes.INITIAL_COURT_ORDER]: 'Court order of name change',\r\n    [ReqTypes.DRIVERS_LICENSE]: 'Updated driver\\'s license',\r\n    [ReqTypes.PASSPORT]: 'Updated passport'\r\n}\r\n\r\nexport function nameOfReq(req) {\r\n    if (typeof req === \"number\") {\r\n        return ReqTypeNames[req];\r\n    }\r\n    return req.toString();\r\n}\r\n\r\nclass UsesUpType {\r\n    constructor(type, amount) {\r\n        this.type = type;\r\n        this.amount = amount;\r\n    }\r\n\r\n    toString() {\r\n        return '' + this.amount + ' ' + nameOfReq(this.type);\r\n    }\r\n}\r\n\r\nfunction UsesUp(type, amount) {\r\n    return new UsesUpType(type, amount);\r\n}\r\n\r\nconst STARTING_MATERIALS = new Set([\r\n    ReqTypes.THERAPIST,\r\n    ReqTypes.PHYSICIAN,\r\n    ReqTypes.MONEY\r\n]);\r\n\r\nconst STEPS = [\r\n    {\r\n        name: \"File name change petition\",\r\n        description: \"Go to court and file a petition for name change!\",\r\n        requirements: [UsesUp(ReqTypes.MONEY, 50)],\r\n        outputs: [ReqTypes.INITIAL_COURT_ORDER],\r\n    },\r\n    {\r\n        name: \"Get copies of court order\",\r\n        description: \"Get a bunch of copies that you won't end up needing all of....\",\r\n        requirements: [ReqTypes.INITIAL_COURT_ORDER],\r\n        outputs: [ReqTypes.COURT_ORDER]\r\n    },\r\n    {\r\n        name: \"Request therapist letter\",\r\n        description: \"Get a therapist to give you a letter\",\r\n        requirements: [ReqTypes.THERAPIST],\r\n        outputs: [ReqTypes.THERAPIST_LETTER]\r\n    },\r\n    {\r\n        name: \"Request physician letter\",\r\n        description: \"Get a physician to give you a letter\",\r\n        requirements: [ReqTypes.PHYSICIAN],\r\n        outputs: [ReqTypes.PHYSICIAN_LETTER]\r\n    },\r\n    {\r\n        name: \"Go to Social Security\",\r\n        description: \"Thanks FDR\",\r\n        requirements: [UsesUp(ReqTypes.COURT_ORDER, 1), UsesUp(ReqTypes.PHYSICIAN_LETTER, 1)],\r\n        outputs: [ReqTypes.SOCIAL_SECURITY_CARD, ReqTypes.DIGIAL_SOCIAL_SECURITY_UPDATE]\r\n    },\r\n    {\r\n        name: \"Go to MVA HQ\",\r\n        description: \"Did you know Glen Burnie is actually still PG County?\",\r\n        requirements: [UsesUp(ReqTypes.PHYSICIAN_LETTER, 1), UsesUp(ReqTypes.THERAPIST_LETTER, 1)],\r\n        outputs: [ReqTypes.MVA_LETTER]\r\n    },\r\n    {\r\n        name: \"Go to MVA\",\r\n        description: \"Do that\",\r\n        requirements: [ReqTypes.DIGIAL_SOCIAL_SECURITY_UPDATE, UsesUp(ReqTypes.MVA_LETTER, 1)],\r\n        outputs: [ReqTypes.DRIVERS_LICENSE]\r\n    },\r\n    {\r\n        name: \"Go to passport place\",\r\n        description: \"Do that\",\r\n        requirements: [UsesUp(ReqTypes.COURT_ORDER, 1), UsesUp(ReqTypes.PHYSICIAN_LETTER, 1)],\r\n        outputs: [ReqTypes.PASSPORT]\r\n    }\r\n];\r\n\r\nclass Loader extends React.Component {\r\n\r\n    getRawReq(req) {\r\n        return (req instanceof UsesUpType) ? req.type : req;\r\n    }\r\n\r\n    satisfiesRequirement(req, materials) {\r\n        return (req instanceof UsesUpType && materials.has(req.type)) || materials.has(req);\r\n    }\r\n\r\n    getNextColumn(steps, materials, sources) {\r\n        let nextMaterials = new Set(materials);\r\n        let nextSteps = [];\r\n        let remainingSteps = [];\r\n        let nextSources = {...sources};\r\n\r\n        steps.forEach(step => {\r\n            if (step.requirements.map(req => this.satisfiesRequirement(req, materials)).reduce((acc, curr) => acc && curr)) {\r\n                nextSteps.push(step);\r\n                nextMaterials = new Set([...nextMaterials, ...step.outputs]);\r\n                step.outputs.forEach(o => nextSources[o] = step.name);\r\n            } else {\r\n                remainingSteps.push(step);\r\n            }\r\n        });\r\n\r\n        return {\r\n            nextMaterials: new Set(nextMaterials), nextSteps, remainingSteps, nextSources\r\n        };\r\n    }\r\n\r\n    getColumnsWithSources() {\r\n        let columns = [];\r\n        let materials = STARTING_MATERIALS;\r\n        let remainingSteps = STEPS;\r\n        let counter = 0;\r\n        let sources = {};\r\n        while (counter < 4 && remainingSteps !== []) {\r\n            const next = this.getNextColumn(remainingSteps, materials, sources);\r\n            columns.push(next.nextSteps);\r\n            remainingSteps = next.remainingSteps;\r\n            materials = next.nextMaterials;\r\n            sources = next.nextSources;\r\n            counter++;\r\n        }\r\n\r\n        return {columns, sources};\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.connectionRefs.forEach(ref => ref.current.allComponentsDidMount());\r\n\r\n        $('.overviewContainer').scroll(\r\n            e => {\r\n                $('.svgContainer').css({\r\n                    left: -$('.overviewContainer').scrollLeft()\r\n                });\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const columnsWithSources = this.getColumnsWithSources();\r\n        const columns = columnsWithSources.columns;\r\n        const sources = columnsWithSources.sources;\r\n\r\n        let stepRefs = {};\r\n        this.connectionRefs = [];\r\n        let connections = [];\r\n        columns.forEach(\r\n            column =>\r\n                column.forEach(\r\n                    step => {\r\n                        stepRefs[step.name] = React.createRef();\r\n\r\n                        step.requirements.forEach(\r\n                            req => {\r\n                                connections.push([sources[this.getRawReq(req)], step.name]);\r\n                            }\r\n                        )\r\n                    }\r\n                )\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <SVGContainer>\r\n                    {connections.map(\r\n                        connection => {\r\n                            if (!connection[0]) {\r\n                                return null;\r\n                            }\r\n                            const ref = React.createRef();\r\n                            this.connectionRefs.push(ref);\r\n                            return (\r\n                                <Connection\r\n                                    key={connection[0] + '.' + connection[1]}\r\n                                    ref={ref}\r\n                                    startRef={stepRefs[connection[0]]}\r\n                                    endRef={stepRefs[connection[1]]}\r\n                                    />\r\n                                )}\r\n                    )}\r\n                    \r\n                </SVGContainer>\r\n                <div className=\"overviewContainer\">\r\n                    {columns.map(\r\n                        (column, index) => (\r\n                            <div className=\"column\" key={index}>\r\n                                {column.map(step => <Step ref={stepRefs[step.name]} key={step.name} {...step} />)}\r\n                            </div>\r\n                        )\r\n                    )}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Loader from './loader';\n\nclass App extends Component {\n  render() {\n    return (\n      <>\n        <script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"></script>\n        <Loader />\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}